{% extends 'dashboard/ddf.html' %}

{% block title %}Dashboard - AFMS{% endblock %}
{% load static  %}
<link rel="stylesheet" href="{% static 'css/calender.css' %}">

{% block page_title %}Calendar{% endblock %}

{% block content %}
<div class="content" id="calender">
    <h2> Hey {{user}} you have logged in as {{user.user_type}}. Welcome to the Farm Calendar </h2>
    <p>Here you can manage farm activities, products, orders, and more.</p>

    <div class="content" id="calendar">
        <h2>Calendar</h2>
        <div class="calendar-controls">
            <button onclick="changeMonth(-1)">Previous</button>
            <div id="monthLabel"></div>
            <button onclick="changeMonth(1)">Next</button>
        </div>
        <div class="calendar-header">
            <div>Sun</div>
            <div>Mon</div>
            <div>Tue</div>
            <div>Wed</div>
            <div>Thu</div>
            <div>Fri</div>
            <div>Sat</div>
        </div>
        <div class="calendar-grid" id="calendarGrid"></div>
    </div>
</div>

<script>
    let currentYear = new Date().getFullYear(); // Initialize to current year
    let currentMonth = new Date().getMonth(); // Initialize to current month
    const today = new Date().getDate(); // Get current day
    const todayMonth = new Date().getMonth(); // Get current month
    const todayYear = new Date().getFullYear(); // Get current year

    function updateCalendar(year, month) {
        const monthLabel = document.getElementById('monthLabel');
        const calendarGrid = document.getElementById('calendarGrid');
        calendarGrid.innerHTML = ''; // Clear previous calendar

        const monthNames = [
            'January', 'February', 'March', 'April', 'May', 'June',
            'July', 'August', 'September', 'October', 'November', 'December'
        ];
        monthLabel.textContent = `${monthNames[month]} ${year}`;

        const firstDay = new Date(year, month, 1);
        const lastDay = new Date(year, month + 1, 0);
        const startDay = firstDay.getDay();

        // Create empty boxes for the start of the month
        for (let i = 0; i < startDay; i++) {
            const emptyBox = document.createElement('div');
            emptyBox.classList.add('calendar-day', 'empty-day');
            calendarGrid.appendChild(emptyBox);
        }

        // Create boxes for each day
        for (let day = 1; day <= lastDay.getDate(); day++) {
            const dayBox = document.createElement('div');
            dayBox.classList.add('calendar-day');
            dayBox.textContent = day;

            // Highlight the current date
            if (day === today && month === todayMonth && year === todayYear) {
                dayBox.classList.add('current-day');
            }

            calendarGrid.appendChild(dayBox);
        }
    }

    function changeMonth(offset) {
        currentMonth += offset;
        if (currentMonth < 0) {
            currentMonth = 11;
            currentYear -= 1;
        } else if (currentMonth > 11) {
            currentMonth = 0;
            currentYear += 1;
        }
        updateCalendar(currentYear, currentMonth);
    }

    window.onload = function() {
        updateCalendar(currentYear, currentMonth);
    };
</script>

<style>
    /* Calendar Header */
    .calendar-header {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        text-align: center;
        font-weight: bold;
        padding: 5px;
        background-color: #f4f4f4;
    }

    /* Calendar Grid */
    .calendar-grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        grid-gap: 5px;
        padding: 10px;
    }

/* Default Calendar Day */
.calendar-day {
    display: flex;
    justify-content: center;  /* Centers horizontally */
    align-items: center;  /* Centers vertically */
    text-align: center;
    padding: 15px; /* Increase padding for better spacing */
    background-color: #f0f0f0;
    border: 1px solid #ddd;
    cursor: pointer;
    transition: 0.3s;
    font-size: 16px;  /* Increase font size */
    width: 150px;  /* Fixed width */
    height: 100px; /* Fixed height to make perfect square */
}

/* Highlight Current Date */
.current-day {
    background-color: #007bff;
    color: white;
    font-weight: bold;
    border-radius: 5px;
}

/* Hover Effect */
.calendar-day:hover {
    background-color: #ddd;
}

    /* Empty Days (Before 1st of the Month) */
    .empty-day {
        background: none;
        border: none;
    }
</style>
{% endblock %}
